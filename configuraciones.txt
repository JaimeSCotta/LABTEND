Configuración monitor config.txt >

hdmi_force_edit_audio=1
max_usb_current=1
hdmi_force_hotplug=1
config_hdmi_boost=7
hdmi_group=2
hdmi_mode=87
hdmi_drive=2
display_rotate=0
hdmi_timings 1024 1 200 18 200 600 1 50 3 50 0 0 0 60 0 51200000 3


Configuración pantalla en reposo >

#!/bin/bash

# Tiempo en segundos para apagar la pantalla (2 minutos)
INACTIVITY_TIME=120

# Comando para apagar la pantalla
turn_off_screen() {
  xset dpms force off
}

# Comando para encender la pantalla
turn_on_screen() {
  xset dpms force on
}

# Monitorea los eventos de la pantalla táctil
monitor_touch_events() {
  evtest /dev/input/event8 | while read line; do
    # Si hay un evento de pulsación, enciende la pantalla
    if [[ "$line" == *"SYN_REPORT"* ]]; then
      turn_on_screen
    fi
  done
}

# Apagar la pantalla después de INACTIVITY_TIME segundos
while true; do
  # Apagar pantalla tras 2 minutos
  sleep $INACTIVITY_TIME
  turn_off_screen

  # Monitorear eventos táctiles para encender la pantalla
  monitor_touch_events
done



Configuración pantalla en reposo como servicio >

[Unit]
Description=Control de encendido/apagado de la pantalla táctil
After=multi-user.target

[Service]
Type=simple
ExecStart=/home/pi/screen_power.sh
User=pi
Environment=DISPLAY=:0.0
Environment=XAUTHORITY=/home/pi/.Xauthority
Restart=on-failure

[Install]
WantedBy=multi-user.target



Configuración teclado como servicio >

[Unit]
Description=Iniciar Onboard al arrancar
After=graphical.target

[Service]
User=pi
Environment=DISPLAY=:0
ExecStart=/usr/bin/onboard
Restart=on-failure

[Install]
WantedBy=graphical.target



Configuración full-screen como servicio >

[Unit]
Description=Iniciar Chromium en modo fullscreen al arrancar
After=graphical.target

[Service]
User=pi
Environment=DISPLAY=:0
ExecStart=/usr/bin/chromium-browser --start-fullscreen "https://odoo.trimcomposites.com/web#cids=3&action=391&menu_id=284"
Restart=on-failure

[Install]
WantedBy=graphical.target



Configuración kiosk como servicio >

[Unit]
Description=Iniciar Chromium en modo kiosko sin fullscreen
After=graphical.target

[Service]
User=pi
Environment=DISPLAY=:0
ExecStart=/usr/bin/chromium-browser --app="https://odoo.trimcomposites.com/web#cids=3&action=391&menu_id=284" --no-sandbox --disable-gpu --enable-features=WebUIDarkMode --disable-features=TranslateUI --window-size=1024,600 --window-position=0,0 --noerrdialogs --disable-infobars --disable-session-crashed-bubble --disable-pinch --overscroll-history-navigation=0 --disable-software-rasterizer --disable-overlay-scrollbar --disable-gpu-compositing --disable-background-networking --inactivity-timeout=120
Restart=on-failure

[Install]
WantedBy=graphical.target



Configuración xset como servicio >

[Unit]
Description=Configurar DPMS para apagar la pantalla tras 120 segundos
After=graphical.target

[Service]
ExecStart=/usr/bin/env DISPLAY=:0.0 XAUTHORITY=/home/pi/.Xauthority /usr/bin/xset dpms 120 240 360
User=pi
Type=oneshot

[Install]
WantedBy=graphical.target